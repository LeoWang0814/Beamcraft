@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  #root {
    min-height: 100vh;
  }
}

@layer components {
  .app-shell {
    animation: app-appear 220ms ease-out;
  }

  .panel-surface {
    @apply rounded-panel border shadow-lift;
    border-color: var(--line-soft);
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.014), transparent 35%), var(--surface-soft);
    backdrop-filter: blur(4px);
  }

  .eyebrow {
    @apply text-[11px] uppercase tracking-[0.18em] text-muted;
  }

  .panel-title {
    @apply text-lg font-semibold tracking-tight text-text;
  }

  .status-chip {
    @apply rounded-full border px-3 py-1 text-xs font-medium;
  }

  .status-chip-idle {
    border-color: var(--line-soft);
    background: var(--surface-strong);
    color: var(--muted);
  }

  .status-chip-success {
    border-color: rgba(90, 245, 148, 0.36);
    background: rgba(90, 245, 148, 0.14);
    color: #9af3c0;
  }

  .control-select {
    @apply rounded-button border px-3 py-2 text-sm text-text outline-none transition;
    border-color: var(--line-soft);
    background: var(--surface-strong);
  }

  .control-select:focus-visible {
    border-color: var(--accent);
    box-shadow: 0 0 0 2px rgba(199, 176, 138, 0.26);
  }

  .control-button {
    @apply rounded-button border px-3 py-2 text-sm text-text transition-all duration-150;
    border-color: var(--line-soft);
    background: var(--surface-strong);
  }

  .control-button:hover {
    border-color: rgba(199, 176, 138, 0.55);
    background: var(--panel3);
    transform: translateY(-1px);
  }

  .control-button:active {
    transform: translateY(0);
  }

  .control-button:disabled {
    @apply cursor-not-allowed opacity-45;
    transform: none;
  }

  .control-button-accent {
    border-color: rgba(199, 176, 138, 0.68);
    background: var(--accent-soft);
    color: #f2e8d5;
  }

  .tool-card {
    @apply flex w-full items-start gap-3 rounded-button border px-3 py-3 text-left transition-all duration-150;
    border-color: var(--line-soft);
    background: var(--surface-strong);
  }

  .tool-card:hover {
    border-color: rgba(199, 176, 138, 0.45);
    background: rgba(48, 48, 45, 0.9);
    transform: translateY(-1px);
  }

  .tool-card:disabled {
    @apply cursor-not-allowed opacity-45;
    transform: none;
  }

  .tool-card-selected {
    border-color: var(--accent);
    background: var(--accent-soft);
    box-shadow: inset 0 0 0 1px rgba(199, 176, 138, 0.34);
  }

  .tool-icon-wrap {
    @apply h-11 w-11 shrink-0 rounded-button border p-1.5 text-text;
    border-color: var(--line-soft);
    background: var(--panel);
  }

  .hotkey-chip {
    @apply rounded-md border px-1.5 py-0.5 text-[11px] text-muted;
    border-color: var(--line-soft);
    background: var(--panel);
  }

  .rule-chip {
    @apply rounded-full border px-2.5 py-1 text-[11px] font-medium;
  }

  .rule-chip-on {
    border-color: rgba(199, 176, 138, 0.56);
    background: var(--accent-soft);
    color: #f2e8d5;
  }

  .rule-chip-off {
    border-color: var(--line-soft);
    background: var(--surface-strong);
    color: var(--muted);
  }

  .status-row {
    @apply flex items-center gap-3 rounded-button border px-3 py-2;
    border-color: var(--line-soft);
    background: var(--surface-strong);
  }

  .stat-grid {
    @apply grid grid-cols-2 gap-3;
  }

  .stat-k {
    @apply text-[11px] text-muted;
  }

  .stat-v {
    @apply mt-1 text-sm font-semibold text-text;
  }

  .board-wrap {
    background:
      linear-gradient(to bottom, rgba(255, 255, 255, 0.02), transparent 42%),
      var(--board);
  }

  .board-cell {
    @apply relative border transition-colors;
    border-color: var(--grid-line);
    min-width: 48px;
    min-height: 48px;
  }

  .board-cell-default {
    background: transparent;
  }

  .board-cell-default:hover {
    background: rgba(255, 255, 255, 0.03);
  }

  .board-cell-pad {
    background: rgba(199, 176, 138, 0.06);
    box-shadow: inset 0 0 0 1px rgba(199, 176, 138, 0.2);
  }

  .board-cell-placeable {
    background: rgba(199, 176, 138, 0.14);
    box-shadow: inset 0 0 0 1px rgba(225, 204, 167, 0.55);
  }

  .board-cell-wall {
    background: rgba(53, 51, 47, 0.72);
    box-shadow: inset 0 0 0 1px rgba(14, 13, 12, 0.54);
  }

  .board-cell-selected {
    background: rgba(199, 176, 138, 0.14);
    box-shadow: inset 0 0 0 1px rgba(225, 204, 167, 0.8);
  }

  .board-tag {
    @apply absolute right-1 top-1 rounded px-1 text-[9px] leading-none text-muted;
    background: rgba(32, 32, 30, 0.92);
  }

  .piece-chip {
    @apply h-[82%] w-[82%] rounded-cell border p-1 text-text;
    border-color: var(--line-soft);
    background: rgba(39, 39, 36, 0.84);
    transition: transform 160ms ease, box-shadow 160ms ease;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.08);
  }

  .piece-chip-selected {
    border-color: var(--accent);
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.14),
      0 0 0 2px rgba(199, 176, 138, 0.24);
  }

  .piece-chip-fixed {
    opacity: 0.9;
  }

  .piece-chip-gate-open {
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.14),
      0 0 0 1px rgba(90, 245, 148, 0.26);
  }

  .piece-chip-gate-closed {
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.08),
      0 0 0 1px rgba(255, 93, 117, 0.22);
  }

  .piece-gate-indicator {
    @apply absolute left-[4px] top-[4px] h-[8px] w-[8px] rounded-full border border-black/35;
    transition: background-color 140ms ease, box-shadow 140ms ease;
  }

  .piece-gate-indicator-open {
    background: rgba(90, 245, 148, 0.92);
    box-shadow: 0 0 0 2px rgba(90, 245, 148, 0.24);
  }

  .piece-gate-indicator-closed {
    background: rgba(255, 93, 117, 0.88);
    box-shadow: 0 0 0 2px rgba(255, 93, 117, 0.22);
  }

  .piece-lock {
    @apply absolute right-[4px] top-[4px] rounded px-1 py-[1px] text-[9px] text-muted;
    background: rgba(32, 32, 30, 0.94);
  }
}

@keyframes app-appear {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
